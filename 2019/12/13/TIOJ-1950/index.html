<!doctype html><html lang=en-us><head><link rel=preload href=/lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><script type=text/javascript src=https://latest.cactus.chat/cactus.js></script>
<link rel=stylesheet href=https://latest.cactus.chat/style.css type=text/css><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>TIOJ-1950 | 蛋餅的競程隨筆</title><link rel=canonical href=https://omeletwithoutegg.github.io/2019/12/13/TIOJ-1950/><meta name=description content="一個廢人想寫題解，所以他想辦法弄網站"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="TIOJ-1950"><meta property="og:description" content="小向的試煉 2-3：轉！(Rotate!) https://tioj.ck.tp.edu.tw/problems/1950
Description 給定長度$N$的排列，問「以交換任意兩個數字的方式排序這個序列需要多少次數」
另外有$M$次修改，每次修改會交換數字$i$和數字$j$的位置，請輸出$M+1$行代表一開始和每次修改過後的答案
Solution 已經知道每個數字應該被放到哪裡了，所以我們可以想到一個排序方法
每次看某個位置$i$的數字$x$，如果和$i$不同的話就把$x$放到位置$x$的地方，再繼續對原本放在位置$x$的地方的數字做同樣的事
可以發現這樣會形成好幾個「環」，例如範測的$(1, 4, 2, 5, 3)$會形成兩個環
$$
\begin{pmatrix}
1
\end{pmatrix}
\begin{pmatrix}
4 & 5 & 3 & 2
\end{pmatrix}
$$
或是$(1, 6, 4, 5, 3, 2)$會形成三個環
$$
\begin{pmatrix}
1
\end{pmatrix}
\begin{pmatrix}
6 & 2
\end{pmatrix}
\begin{pmatrix}
4 & 5 & 3
\end{pmatrix}
$$
也就是說，每個環代表第一個元素要放到第二個元素的位置，第二個元素要放到第三個元素的位置&mldr;以此類推
一個大小$L$的環需要的交換次數是$L-1$，所以把$1\dots n$的排列排序好所需的時間就是$n-($環的個數$)$
用數學一點的講法就是一個置換可以分解成好多不相交的輪換(?)而且方法是唯一的喔
考慮一下交換了兩個數字會發生什麼事:
如果他們在同一個「環」裡面，那那個環就會被切成兩個環
反之則會讓兩個環合在一起，變成一個「環」
示意圖大概就是這樣
要怎麼辦到這件事呢？快速把元素之間連接或者切斷，我們會想到使用鏈結串列，但是這樣無法判斷他們是否在同一個環裡面
退而求其次可以使用二元樹來維護，用$\mathcal{O}(\log n)$獲得可以剪切又可以黏貼序列的神力(?)
我選擇用splay來實作，詳細的原理自己google OwO
AC code 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 // __________________ // | ________________ | // || ____ || // || /\ | || // || /__\ | || // || / \ |____ || // ||________________|| // |__________________| // \###################\ // \###################\ // \ ____ \ // \_______\___\_______\ // An AC a day keeps the doctor away."><meta property="og:type" content="article"><meta property="og:url" content="https://omeletwithoutegg.github.io/2019/12/13/TIOJ-1950/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-12-13T23:26:11+00:00"><meta property="article:modified_time" content="2019-12-13T23:26:11+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="TIOJ-1950"><meta name=twitter:description content="小向的試煉 2-3：轉！(Rotate!) https://tioj.ck.tp.edu.tw/problems/1950
Description 給定長度$N$的排列，問「以交換任意兩個數字的方式排序這個序列需要多少次數」
另外有$M$次修改，每次修改會交換數字$i$和數字$j$的位置，請輸出$M+1$行代表一開始和每次修改過後的答案
Solution 已經知道每個數字應該被放到哪裡了，所以我們可以想到一個排序方法
每次看某個位置$i$的數字$x$，如果和$i$不同的話就把$x$放到位置$x$的地方，再繼續對原本放在位置$x$的地方的數字做同樣的事
可以發現這樣會形成好幾個「環」，例如範測的$(1, 4, 2, 5, 3)$會形成兩個環
$$
\begin{pmatrix}
1
\end{pmatrix}
\begin{pmatrix}
4 & 5 & 3 & 2
\end{pmatrix}
$$
或是$(1, 6, 4, 5, 3, 2)$會形成三個環
$$
\begin{pmatrix}
1
\end{pmatrix}
\begin{pmatrix}
6 & 2
\end{pmatrix}
\begin{pmatrix}
4 & 5 & 3
\end{pmatrix}
$$
也就是說，每個環代表第一個元素要放到第二個元素的位置，第二個元素要放到第三個元素的位置&mldr;以此類推
一個大小$L$的環需要的交換次數是$L-1$，所以把$1\dots n$的排列排序好所需的時間就是$n-($環的個數$)$
用數學一點的講法就是一個置換可以分解成好多不相交的輪換(?)而且方法是唯一的喔
考慮一下交換了兩個數字會發生什麼事:
如果他們在同一個「環」裡面，那那個環就會被切成兩個環
反之則會讓兩個環合在一起，變成一個「環」
示意圖大概就是這樣
要怎麼辦到這件事呢？快速把元素之間連接或者切斷，我們會想到使用鏈結串列，但是這樣無法判斷他們是否在同一個環裡面
退而求其次可以使用二元樹來維護，用$\mathcal{O}(\log n)$獲得可以剪切又可以黏貼序列的神力(?)
我選擇用splay來實作，詳細的原理自己google OwO
AC code 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 // __________________ // | ________________ | // || ____ || // || /\ | || // || /__\ | || // || / \ |____ || // ||________________|| // |__________________| // \###################\ // \###################\ // \ ____ \ // \_______\___\_______\ // An AC a day keeps the doctor away."><link rel=stylesheet href=https://omeletwithoutegg.github.io/css/styles.36c12a99052778131d28078b3171237fd0184ad9b87c778208912a8d08e2d0194867a030c64d9b02d6077de53a8a9979249331f971fb47c471a2d59676520a3a.css integrity="sha512-NsEqmQUneBMdKAeLMXEjf9AYStm4fHeCCJEqjQji0BlIZ6Awxk2bAtYHfeU6ipl5JJMx+XH7R8RxotWWdlIKOg=="><link rel=stylesheet href=https://omeletwithoutegg.github.io/css/highlight.css><link rel=stylesheet href=https://omeletwithoutegg.github.io/css/style-dark.css><link rel=stylesheet href=https://omeletwithoutegg.github.io/css/search.css><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=https://omeletwithoutegg.github.io/images/favicon.ico><script async src="https://www.googletagmanager.com/gtag/js?id=G-0ME10Z2L0D"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-0ME10Z2L0D",{anonymize_ip:!1})}</script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-153846761-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick='$("html, body").animate({scrollTop:0},"fast")' style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu><span id=nav><ul><li><a href=/>Home</a></li><li><a href=/about>About</a></li><li><a href=/posts>Posts</a></li><li><a href=/resources>Resources</a></li><li><a href=/search>Search</a></li><li><a href=/tags>Tags</a></li></ul></span><br><span id=actions><ul><li><a class=icon href=https://omeletwithoutegg.github.io/2019/12/13/TIOJ-1394/ aria-label=Previous><i class="fas fa-chevron-left" aria-hidden=true onmouseover='$("#i-prev").toggle()' onmouseout='$("#i-prev").toggle()'></i></a></li><li><a class=icon href=https://omeletwithoutegg.github.io/2019/12/14/TIOJ-1171-LCT/ aria-label=Next><i class="fas fa-chevron-right" aria-hidden=true onmouseover='$("#i-next").toggle()' onmouseout='$("#i-next").toggle()'></i></a></li><li><a class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up" aria-hidden=true onmouseover='$("#i-top").toggle()' onmouseout='$("#i-top").toggle()'></i></a></li><li><a class=icon href=# aria-label=Share><i class="fas fa-share-alt" aria-hidden=true onmouseover='$("#i-share").toggle()' onmouseout='$("#i-share").toggle()' onclick='return $("#share").toggle(),!1'></i></a></li></ul><span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span></span><br><div id=share style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fomeletwithoutegg.github.io%2f2019%2f12%2f13%2fTIOJ-1950%2f" aria-label=Facebook><i class="fab fa-facebook" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fomeletwithoutegg.github.io%2f2019%2f12%2f13%2fTIOJ-1950%2f&text=TIOJ-1950" aria-label=Twitter><i class="fab fa-twitter" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fomeletwithoutegg.github.io%2f2019%2f12%2f13%2fTIOJ-1950%2f&title=TIOJ-1950" aria-label=Linkedin><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fomeletwithoutegg.github.io%2f2019%2f12%2f13%2fTIOJ-1950%2f&is_video=false&description=TIOJ-1950" aria-label=Pinterest><i class="fab fa-pinterest" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=TIOJ-1950&body=Check out this article: https%3a%2f%2fomeletwithoutegg.github.io%2f2019%2f12%2f13%2fTIOJ-1950%2f" aria-label=Email><i class="fas fa-envelope" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fomeletwithoutegg.github.io%2f2019%2f12%2f13%2fTIOJ-1950%2f&title=TIOJ-1950" aria-label=Pocket><i class="fab fa-get-pocket" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fomeletwithoutegg.github.io%2f2019%2f12%2f13%2fTIOJ-1950%2f&title=TIOJ-1950" aria-label=reddit><i class="fab fa-reddit" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fomeletwithoutegg.github.io%2f2019%2f12%2f13%2fTIOJ-1950%2f&name=TIOJ-1950&description=%e5%b0%8f%e5%90%91%e7%9a%84%e8%a9%a6%e7%85%89%202-3%ef%bc%9a%e8%bd%89%ef%bc%81%28Rotate%21%29%20https%3a%2f%2ftioj.ck.tp.edu.tw%2fproblems%2f1950%0aDescription%20%e7%b5%a6%e5%ae%9a%e9%95%b7%e5%ba%a6%24N%24%e7%9a%84%e6%8e%92%e5%88%97%ef%bc%8c%e5%95%8f%e3%80%8c%e4%bb%a5%e4%ba%a4%e6%8f%9b%e4%bb%bb%e6%84%8f%e5%85%a9%e5%80%8b%e6%95%b8%e5%ad%97%e7%9a%84%e6%96%b9%e5%bc%8f%e6%8e%92%e5%ba%8f%e9%80%99%e5%80%8b%e5%ba%8f%e5%88%97%e9%9c%80%e8%a6%81%e5%a4%9a%e5%b0%91%e6%ac%a1%e6%95%b8%e3%80%8d%0a%e5%8f%a6%e5%a4%96%e6%9c%89%24M%24%e6%ac%a1%e4%bf%ae%e6%94%b9%ef%bc%8c%e6%af%8f%e6%ac%a1%e4%bf%ae%e6%94%b9%e6%9c%83%e4%ba%a4%e6%8f%9b%e6%95%b8%e5%ad%97%24i%24%e5%92%8c%e6%95%b8%e5%ad%97%24j%24%e7%9a%84%e4%bd%8d%e7%bd%ae%ef%bc%8c%e8%ab%8b%e8%bc%b8%e5%87%ba%24M%2b1%24%e8%a1%8c%e4%bb%a3%e8%a1%a8%e4%b8%80%e9%96%8b%e5%a7%8b%e5%92%8c%e6%af%8f%e6%ac%a1%e4%bf%ae%e6%94%b9%e9%81%8e%e5%be%8c%e7%9a%84%e7%ad%94%e6%a1%88%0aSolution%20%e5%b7%b2%e7%b6%93%e7%9f%a5%e9%81%93%e6%af%8f%e5%80%8b%e6%95%b8%e5%ad%97%e6%87%89%e8%a9%b2%e8%a2%ab%e6%94%be%e5%88%b0%e5%93%aa%e8%a3%a1%e4%ba%86%ef%bc%8c%e6%89%80%e4%bb%a5%e6%88%91%e5%80%91%e5%8f%af%e4%bb%a5%e6%83%b3%e5%88%b0%e4%b8%80%e5%80%8b%e6%8e%92%e5%ba%8f%e6%96%b9%e6%b3%95%0a%e6%af%8f%e6%ac%a1%e7%9c%8b%e6%9f%90%e5%80%8b%e4%bd%8d%e7%bd%ae%24i%24%e7%9a%84%e6%95%b8%e5%ad%97%24x%24%ef%bc%8c%e5%a6%82%e6%9e%9c%e5%92%8c%24i%24%e4%b8%8d%e5%90%8c%e7%9a%84%e8%a9%b1%e5%b0%b1%e6%8a%8a%24x%24%e6%94%be%e5%88%b0%e4%bd%8d%e7%bd%ae%24x%24%e7%9a%84%e5%9c%b0%e6%96%b9%ef%bc%8c%e5%86%8d%e7%b9%bc%e7%ba%8c%e5%b0%8d%e5%8e%9f%e6%9c%ac%e6%94%be%e5%9c%a8%e4%bd%8d%e7%bd%ae%24x%24%e7%9a%84%e5%9c%b0%e6%96%b9%e7%9a%84%e6%95%b8%e5%ad%97%e5%81%9a%e5%90%8c%e6%a8%a3%e7%9a%84%e4%ba%8b%0a%e5%8f%af%e4%bb%a5%e7%99%bc%e7%8f%be%e9%80%99%e6%a8%a3%e6%9c%83%e5%bd%a2%e6%88%90%e5%a5%bd%e5%b9%be%e5%80%8b%e3%80%8c%e7%92%b0%e3%80%8d%ef%bc%8c%e4%be%8b%e5%a6%82%e7%af%84%e6%b8%ac%e7%9a%84%24%281%2c%204%2c%202%2c%205%2c%203%29%24%e6%9c%83%e5%bd%a2%e6%88%90%e5%85%a9%e5%80%8b%e7%92%b0%0a%24%24%0a%5cbegin%7bpmatrix%7d%0a1%0a%5cend%7bpmatrix%7d%0a%5cbegin%7bpmatrix%7d%0a4%20%26amp%3b%205%20%26amp%3b%203%20%26amp%3b%202%0a%5cend%7bpmatrix%7d%0a%24%24%0a%e6%88%96%e6%98%af%24%281%2c%206%2c%204%2c%205%2c%203%2c%202%29%24%e6%9c%83%e5%bd%a2%e6%88%90%e4%b8%89%e5%80%8b%e7%92%b0%0a%24%24%0a%5cbegin%7bpmatrix%7d%0a1%0a%5cend%7bpmatrix%7d%0a%5cbegin%7bpmatrix%7d%0a6%20%26amp%3b%202%0a%5cend%7bpmatrix%7d%0a%5cbegin%7bpmatrix%7d%0a4%20%26amp%3b%205%20%26amp%3b%203%0a%5cend%7bpmatrix%7d%0a%24%24%0a%e4%b9%9f%e5%b0%b1%e6%98%af%e8%aa%aa%ef%bc%8c%e6%af%8f%e5%80%8b%e7%92%b0%e4%bb%a3%e8%a1%a8%e7%ac%ac%e4%b8%80%e5%80%8b%e5%85%83%e7%b4%a0%e8%a6%81%e6%94%be%e5%88%b0%e7%ac%ac%e4%ba%8c%e5%80%8b%e5%85%83%e7%b4%a0%e7%9a%84%e4%bd%8d%e7%bd%ae%ef%bc%8c%e7%ac%ac%e4%ba%8c%e5%80%8b%e5%85%83%e7%b4%a0%e8%a6%81%e6%94%be%e5%88%b0%e7%ac%ac%e4%b8%89%e5%80%8b%e5%85%83%e7%b4%a0%e7%9a%84%e4%bd%8d%e7%bd%ae%26hellip%3b%e4%bb%a5%e6%ad%a4%e9%a1%9e%e6%8e%a8%0a%e4%b8%80%e5%80%8b%e5%a4%a7%e5%b0%8f%24L%24%e7%9a%84%e7%92%b0%e9%9c%80%e8%a6%81%e7%9a%84%e4%ba%a4%e6%8f%9b%e6%ac%a1%e6%95%b8%e6%98%af%24L-1%24%ef%bc%8c%e6%89%80%e4%bb%a5%e6%8a%8a%241%5cdots%20n%24%e7%9a%84%e6%8e%92%e5%88%97%e6%8e%92%e5%ba%8f%e5%a5%bd%e6%89%80%e9%9c%80%e7%9a%84%e6%99%82%e9%96%93%e5%b0%b1%e6%98%af%24n-%28%24%e7%92%b0%e7%9a%84%e5%80%8b%e6%95%b8%24%29%24%0a%e7%94%a8%e6%95%b8%e5%ad%b8%e4%b8%80%e9%bb%9e%e7%9a%84%e8%ac%9b%e6%b3%95%e5%b0%b1%e6%98%af%e4%b8%80%e5%80%8b%e7%bd%ae%e6%8f%9b%e5%8f%af%e4%bb%a5%e5%88%86%e8%a7%a3%e6%88%90%e5%a5%bd%e5%a4%9a%e4%b8%8d%e7%9b%b8%e4%ba%a4%e7%9a%84%e8%bc%aa%e6%8f%9b%28%3f%29%e8%80%8c%e4%b8%94%e6%96%b9%e6%b3%95%e6%98%af%e5%94%af%e4%b8%80%e7%9a%84%e5%96%94%0a%e8%80%83%e6%85%ae%e4%b8%80%e4%b8%8b%e4%ba%a4%e6%8f%9b%e4%ba%86%e5%85%a9%e5%80%8b%e6%95%b8%e5%ad%97%e6%9c%83%e7%99%bc%e7%94%9f%e4%bb%80%e9%ba%bc%e4%ba%8b%3a%0a%e5%a6%82%e6%9e%9c%e4%bb%96%e5%80%91%e5%9c%a8%e5%90%8c%e4%b8%80%e5%80%8b%e3%80%8c%e7%92%b0%e3%80%8d%e8%a3%a1%e9%9d%a2%ef%bc%8c%e9%82%a3%e9%82%a3%e5%80%8b%e7%92%b0%e5%b0%b1%e6%9c%83%e8%a2%ab%e5%88%87%e6%88%90%e5%85%a9%e5%80%8b%e7%92%b0%0a%e5%8f%8d%e4%b9%8b%e5%89%87%e6%9c%83%e8%ae%93%e5%85%a9%e5%80%8b%e7%92%b0%e5%90%88%e5%9c%a8%e4%b8%80%e8%b5%b7%ef%bc%8c%e8%ae%8a%e6%88%90%e4%b8%80%e5%80%8b%e3%80%8c%e7%92%b0%e3%80%8d%0a%e7%a4%ba%e6%84%8f%e5%9c%96%e5%a4%a7%e6%a6%82%e5%b0%b1%e6%98%af%e9%80%99%e6%a8%a3%0a%e8%a6%81%e6%80%8e%e9%ba%bc%e8%be%a6%e5%88%b0%e9%80%99%e4%bb%b6%e4%ba%8b%e5%91%a2%ef%bc%9f%e5%bf%ab%e9%80%9f%e6%8a%8a%e5%85%83%e7%b4%a0%e4%b9%8b%e9%96%93%e9%80%a3%e6%8e%a5%e6%88%96%e8%80%85%e5%88%87%e6%96%b7%ef%bc%8c%e6%88%91%e5%80%91%e6%9c%83%e6%83%b3%e5%88%b0%e4%bd%bf%e7%94%a8%e9%8f%88%e7%b5%90%e4%b8%b2%e5%88%97%ef%bc%8c%e4%bd%86%e6%98%af%e9%80%99%e6%a8%a3%e7%84%a1%e6%b3%95%e5%88%a4%e6%96%b7%e4%bb%96%e5%80%91%e6%98%af%e5%90%a6%e5%9c%a8%e5%90%8c%e4%b8%80%e5%80%8b%e7%92%b0%e8%a3%a1%e9%9d%a2%0a%e9%80%80%e8%80%8c%e6%b1%82%e5%85%b6%e6%ac%a1%e5%8f%af%e4%bb%a5%e4%bd%bf%e7%94%a8%e4%ba%8c%e5%85%83%e6%a8%b9%e4%be%86%e7%b6%ad%e8%ad%b7%ef%bc%8c%e7%94%a8%24%5cmathcal%7bO%7d%28%5clog%20n%29%24%e7%8d%b2%e5%be%97%e5%8f%af%e4%bb%a5%e5%89%aa%e5%88%87%e5%8f%88%e5%8f%af%e4%bb%a5%e9%bb%8f%e8%b2%bc%e5%ba%8f%e5%88%97%e7%9a%84%e7%a5%9e%e5%8a%9b%28%3f%29%0a%e6%88%91%e9%81%b8%e6%93%87%e7%94%a8splay%e4%be%86%e5%af%a6%e4%bd%9c%ef%bc%8c%e8%a9%b3%e7%b4%b0%e7%9a%84%e5%8e%9f%e7%90%86%e8%87%aa%e5%b7%b1google%20OwO%0aAC%20code%201%202%203%204%205%206%207%208%209%2010%2011%2012%2013%2014%2015%2016%2017%2018%2019%2020%2021%2022%2023%2024%2025%2026%2027%2028%2029%2030%2031%2032%2033%2034%2035%2036%2037%2038%2039%2040%2041%2042%2043%2044%2045%2046%2047%2048%2049%2050%2051%2052%2053%2054%2055%2056%2057%2058%2059%2060%2061%2062%2063%2064%2065%2066%2067%2068%2069%2070%2071%2072%2073%2074%2075%2076%2077%2078%2079%2080%2081%2082%2083%2084%2085%2086%2087%2088%2089%2090%2091%2092%2093%2094%2095%2096%2097%2098%2099%20100%20101%20102%20103%20104%20105%20106%20107%20108%20109%20110%20111%20112%20113%20114%20115%20116%20117%20118%20119%20120%20121%20122%20123%20124%20125%20126%20127%20128%20129%20130%20131%20132%20133%20134%20%2f%2f%20__________________%20%2f%2f%20%7c%20________________%20%7c%20%2f%2f%20%7c%7c%20____%20%7c%7c%20%2f%2f%20%7c%7c%20%2f%5c%20%7c%20%7c%7c%20%2f%2f%20%7c%7c%20%2f__%5c%20%7c%20%7c%7c%20%2f%2f%20%7c%7c%20%2f%20%5c%20%7c____%20%7c%7c%20%2f%2f%20%7c%7c________________%7c%7c%20%2f%2f%20%7c__________________%7c%20%2f%2f%20%5c%23%23%23%23%23%23%23%23%23%23%23%23%23%23%23%23%23%23%23%5c%20%2f%2f%20%5c%23%23%23%23%23%23%23%23%23%23%23%23%23%23%23%23%23%23%23%5c%20%2f%2f%20%5c%20____%20%5c%20%2f%2f%20%5c_______%5c___%5c_______%5c%20%2f%2f%20An%20AC%20a%20day%20keeps%20the%20doctor%20away." aria-label=Tumblr><i class="fab fa-tumblr" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fomeletwithoutegg.github.io%2f2019%2f12%2f13%2fTIOJ-1950%2f&t=TIOJ-1950" aria-label="Hacker News"><i class="fab fa-hacker-news" aria-hidden=true></i></a></li></ul></div><div id=toc><nav id=TableOfContents><ul><li><a href=#description>Description</a></li><li><a href=#solution>Solution</a></li><li><a href=#ac-code>AC code</a></li></ul></nav></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">TIOJ-1950</h1><div class=meta><span class=author itemprop=author itemscope itemtype=http://schema.org/Person><span itemprop=name>2qbingxuan</span></span><div class=postdate><time datetime="2019-12-13 23:26:11 +0000 UTC" itemprop=datePublished>2019-12-13</time></div><div class=article-tag><i class="fas fa-tag"></i>
<a class=tag-link href=/tags/TIOJ rel=tag>TIOJ</a>
,
<a class=tag-link href=/tags/binary-tree rel=tag>binary-tree</a>
,
<a class=tag-link href=/tags/splay-tree rel=tag>splay-tree</a></div></div></header><div class=content itemprop=articleBody><h1 id=小向的試煉-2-3轉rotate>小向的試煉 2-3：轉！(Rotate!)</h1><p><a href=https://tioj.ck.tp.edu.tw/problems/1950>https://tioj.ck.tp.edu.tw/problems/1950</a></p><h2 id=description>Description</h2><p>給定長度$N$的排列，問「以交換任意兩個數字的方式排序這個序列需要多少次數」<br>另外有$M$次修改，每次修改會交換數字$i$和數字$j$的位置，請輸出$M+1$行代表一開始和每次修改過後的答案</p><h2 id=solution>Solution</h2><p>已經知道每個數字應該被放到哪裡了，所以我們可以想到一個排序方法<br>每次看某個位置$i$的數字$x$，如果和$i$不同的話就把$x$放到位置$x$的地方，再繼續對原本放在位置$x$的地方的數字做同樣的事<br>可以發現這樣會形成好幾個「環」，例如範測的$(1, 4, 2, 5, 3)$會形成兩個環<br>$$<br>\begin{pmatrix}<br>1<br>\end{pmatrix}<br>\begin{pmatrix}<br>4 & 5 & 3 & 2<br>\end{pmatrix}<br>$$<br>或是$(1, 6, 4, 5, 3, 2)$會形成三個環<br>$$<br>\begin{pmatrix}<br>1<br>\end{pmatrix}<br>\begin{pmatrix}<br>6 & 2<br>\end{pmatrix}<br>\begin{pmatrix}<br>4 & 5 & 3<br>\end{pmatrix}<br>$$</p><p>也就是說，每個環代表第一個元素要放到第二個元素的位置，第二個元素要放到第三個元素的位置&mldr;以此類推<br>一個大小$L$的環需要的交換次數是$L-1$，所以把$1\dots n$的排列排序好所需的時間就是$n-($環的個數$)$<br>用數學一點的講法就是一個置換可以分解成好多不相交的輪換(?)而且方法是唯一的喔</p><p>考慮一下交換了兩個數字會發生什麼事:<br>如果他們在同一個「環」裡面，那那個環就會被切成兩個環<br>反之則會讓兩個環合在一起，變成一個「環」<br>示意圖大概就是這樣</p><p><img src=/images/TIOJ-1950/cycles.png alt></p><p>要怎麼辦到這件事呢？快速把元素之間連接或者切斷，我們會想到使用鏈結串列，但是這樣無法判斷他們是否在同一個環裡面<br>退而求其次可以使用二元樹來維護，用$\mathcal{O}(\log n)$獲得可以剪切又可以黏貼序列的神力(?)<br>我選擇用splay來實作，詳細的原理自己google OwO</p><h2 id=ac-code>AC code</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span><span class=lnt>119
</span><span class=lnt>120
</span><span class=lnt>121
</span><span class=lnt>122
</span><span class=lnt>123
</span><span class=lnt>124
</span><span class=lnt>125
</span><span class=lnt>126
</span><span class=lnt>127
</span><span class=lnt>128
</span><span class=lnt>129
</span><span class=lnt>130
</span><span class=lnt>131
</span><span class=lnt>132
</span><span class=lnt>133
</span><span class=lnt>134
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=c1>//   __________________
</span></span></span><span class=line><span class=cl><span class=c1>//  | ________________ |
</span></span></span><span class=line><span class=cl><span class=c1>//  ||          ____  ||
</span></span></span><span class=line><span class=cl><span class=c1>//  ||   /\    |      ||
</span></span></span><span class=line><span class=cl><span class=c1>//  ||  /__\   |      ||
</span></span></span><span class=line><span class=cl><span class=c1>//  || /    \  |____  ||
</span></span></span><span class=line><span class=cl><span class=c1>//  ||________________||
</span></span></span><span class=line><span class=cl><span class=c1>//  |__________________|
</span></span></span><span class=line><span class=cl><span class=c1>//  \###################\
</span></span></span><span class=line><span class=cl><span class=c1>//   \###################\
</span></span></span><span class=line><span class=cl><span class=c1>//    \        ____       \
</span></span></span><span class=line><span class=cl><span class=c1>//     \_______\___\_______\
</span></span></span><span class=line><span class=cl><span class=c1>// An AC a day keeps the doctor away.
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=cp>#pragma g++ optimize(&#34;Ofast&#34;)
</span></span></span><span class=line><span class=cl><span class=cp>#pragma loop_opt(on)
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;bits/extc++.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#ifdef local
</span></span></span><span class=line><span class=cl><span class=cp>#define debug(x) (cerr&lt;&lt;#x&lt;&lt;&#34; = &#34;&lt;&lt;(x)&lt;&lt;&#39;\n&#39;)
</span></span></span><span class=line><span class=cl><span class=cp>#else
</span></span></span><span class=line><span class=cl><span class=cp>#define debug(x) ((void)0)
</span></span></span><span class=line><span class=cl><span class=cp>#endif </span><span class=c1>// local
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=k>using</span> <span class=k>namespace</span> <span class=n>std</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>typedef</span> <span class=kt>int64_t</span> <span class=n>ll</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=k>constexpr</span> <span class=n>ll</span> <span class=n>N</span> <span class=o>=</span> <span class=mi>100025</span><span class=p>,</span> <span class=n>INF</span> <span class=o>=</span> <span class=mf>1e18</span><span class=p>,</span> <span class=n>MOD</span> <span class=o>=</span> <span class=mi>998244353</span><span class=p>,</span> <span class=n>K</span> <span class=o>=</span> <span class=mi>64</span><span class=p>,</span> <span class=n>inf</span> <span class=o>=</span> <span class=mf>1e9</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=nc>Splay</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>struct</span> <span class=nc>node</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>ch</span><span class=p>[</span><span class=mi>2</span><span class=p>],</span><span class=n>pa</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>lf</span><span class=p>[</span><span class=mi>2</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=c1>// lf[0] is the leftmost element of this splay, lf[1] is the rightmost
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span> <span class=n>T</span><span class=p>[</span><span class=n>N</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>pull</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span><span class=p>){</span>
</span></span><span class=line><span class=cl>        <span class=n>T</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>lf</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=n>T</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>ch</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>?</span> <span class=n>T</span><span class=p>[</span><span class=n>T</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>ch</span><span class=p>[</span><span class=mi>0</span><span class=p>]].</span><span class=n>lf</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>:</span> <span class=n>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>T</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>lf</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=n>T</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>ch</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>?</span> <span class=n>T</span><span class=p>[</span><span class=n>T</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>ch</span><span class=p>[</span><span class=mi>1</span><span class=p>]].</span><span class=n>lf</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>:</span> <span class=n>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kt>bool</span> <span class=nf>isroot</span><span class=p>(</span><span class=kt>int</span> <span class=n>x</span><span class=p>){</span><span class=k>return</span> <span class=n>T</span><span class=p>[</span><span class=n>x</span><span class=p>].</span><span class=n>pa</span><span class=o>==</span><span class=mi>0</span><span class=p>;}</span>
</span></span><span class=line><span class=cl>    <span class=kt>bool</span> <span class=nf>dir</span><span class=p>(</span><span class=kt>int</span> <span class=n>x</span><span class=p>){</span><span class=k>return</span> <span class=n>T</span><span class=p>[</span><span class=n>T</span><span class=p>[</span><span class=n>x</span><span class=p>].</span><span class=n>pa</span><span class=p>].</span><span class=n>ch</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>==</span> <span class=n>x</span><span class=p>;}</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>rot</span><span class=p>(</span><span class=kt>int</span> <span class=n>x</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>y</span> <span class=o>=</span> <span class=n>T</span><span class=p>[</span><span class=n>x</span><span class=p>].</span><span class=n>pa</span><span class=p>,</span> <span class=n>z</span> <span class=o>=</span> <span class=n>T</span><span class=p>[</span><span class=n>y</span><span class=p>].</span><span class=n>pa</span><span class=p>,</span> <span class=n>d</span> <span class=o>=</span> <span class=n>dir</span><span class=p>(</span><span class=n>x</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>T</span><span class=p>[</span><span class=n>x</span><span class=p>].</span><span class=n>pa</span> <span class=o>=</span> <span class=n>z</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=n>isroot</span><span class=p>(</span><span class=n>y</span><span class=p>))</span> <span class=n>T</span><span class=p>[</span><span class=n>z</span><span class=p>].</span><span class=n>ch</span><span class=p>[</span><span class=n>dir</span><span class=p>(</span><span class=n>y</span><span class=p>)]</span> <span class=o>=</span> <span class=n>x</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>T</span><span class=p>[</span><span class=n>T</span><span class=p>[</span><span class=n>x</span><span class=p>].</span><span class=n>ch</span><span class=p>[</span><span class=o>!</span><span class=n>d</span><span class=p>]].</span><span class=n>pa</span> <span class=o>=</span> <span class=n>y</span><span class=p>,</span> <span class=n>T</span><span class=p>[</span><span class=n>y</span><span class=p>].</span><span class=n>ch</span><span class=p>[</span><span class=n>d</span><span class=p>]</span> <span class=o>=</span> <span class=n>T</span><span class=p>[</span><span class=n>x</span><span class=p>].</span><span class=n>ch</span><span class=p>[</span><span class=o>!</span><span class=n>d</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=n>T</span><span class=p>[</span><span class=n>x</span><span class=p>].</span><span class=n>ch</span><span class=p>[</span><span class=o>!</span><span class=n>d</span><span class=p>]</span> <span class=o>=</span> <span class=n>y</span><span class=p>,</span> <span class=n>T</span><span class=p>[</span><span class=n>y</span><span class=p>].</span><span class=n>pa</span> <span class=o>=</span> <span class=n>x</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=nf>splay</span><span class=p>(</span><span class=kt>int</span> <span class=n>x</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>while</span><span class=p>(</span><span class=o>!</span><span class=n>isroot</span><span class=p>(</span><span class=n>x</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>y</span> <span class=o>=</span> <span class=n>T</span><span class=p>[</span><span class=n>x</span><span class=p>].</span><span class=n>pa</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=n>isroot</span><span class=p>(</span><span class=n>y</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span><span class=p>(</span><span class=n>dir</span><span class=p>(</span><span class=n>x</span><span class=p>)</span> <span class=o>^</span> <span class=n>dir</span><span class=p>(</span><span class=n>y</span><span class=p>))</span>
</span></span><span class=line><span class=cl>                    <span class=n>rot</span><span class=p>(</span><span class=n>x</span><span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=k>else</span>
</span></span><span class=line><span class=cl>                    <span class=n>rot</span><span class=p>(</span><span class=n>y</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=n>rot</span><span class=p>(</span><span class=n>x</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>T</span><span class=p>[</span><span class=n>x</span><span class=p>].</span><span class=n>lf</span><span class=p>[</span><span class=mi>0</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=c1>//like DSU, present a tree with unique element(leftmost)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>// (A..., x, B...) -&gt; (A...) + (x, B...)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>int</span> <span class=nf>cut</span><span class=p>(</span><span class=kt>int</span> <span class=n>x</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>splay</span><span class=p>(</span><span class=n>x</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>res</span> <span class=o>=</span> <span class=n>T</span><span class=p>[</span><span class=n>x</span><span class=p>].</span><span class=n>ch</span><span class=p>[</span><span class=mi>0</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=n>T</span><span class=p>[</span><span class=n>T</span><span class=p>[</span><span class=n>x</span><span class=p>].</span><span class=n>ch</span><span class=p>[</span><span class=mi>0</span><span class=p>]].</span><span class=n>pa</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=n>T</span><span class=p>[</span><span class=n>x</span><span class=p>].</span><span class=n>ch</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=n>T</span><span class=p>[</span><span class=n>x</span><span class=p>].</span><span class=n>lf</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=n>x</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>res</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=c1>// (A..., x, B...) + (C..., y, D...) -&gt; (x, B...C..., y, D...A...)
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>void</span> <span class=nf>link</span><span class=p>(</span><span class=kt>int</span> <span class=n>x</span><span class=p>,</span> <span class=kt>int</span> <span class=n>y</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=n>x</span> <span class=o>||</span> <span class=o>!</span><span class=n>y</span> <span class=o>||</span> <span class=n>splay</span><span class=p>(</span><span class=n>x</span><span class=p>)</span> <span class=o>==</span> <span class=n>splay</span><span class=p>(</span><span class=n>y</span><span class=p>))</span> <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>x</span> <span class=o>=</span> <span class=n>T</span><span class=p>[</span><span class=n>x</span><span class=p>].</span><span class=n>lf</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=n>y</span> <span class=o>=</span> <span class=n>T</span><span class=p>[</span><span class=n>y</span><span class=p>].</span><span class=n>lf</span><span class=p>[</span><span class=mi>0</span><span class=p>];</span>
</span></span><span class=line><span class=cl>        <span class=n>splay</span><span class=p>(</span><span class=n>x</span><span class=p>),</span> <span class=n>splay</span><span class=p>(</span><span class=n>y</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>T</span><span class=p>[</span><span class=n>y</span><span class=p>].</span><span class=n>pa</span> <span class=o>=</span> <span class=n>x</span><span class=p>,</span> <span class=n>T</span><span class=p>[</span><span class=n>x</span><span class=p>].</span><span class=n>ch</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=n>y</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>splay</span><span class=p>(</span><span class=n>y</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=nf>poke</span><span class=p>(</span><span class=kt>int</span> <span class=n>x</span><span class=p>,</span><span class=kt>int</span> <span class=n>y</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span><span class=p>(</span><span class=n>splay</span><span class=p>(</span><span class=n>x</span><span class=p>)</span> <span class=o>==</span> <span class=n>splay</span><span class=p>(</span><span class=n>y</span><span class=p>))</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// (A..., x, B..., y, C...) -&gt; (x, B...) + (y, C...A...)
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kt>int</span> <span class=n>a</span> <span class=o>=</span> <span class=n>cut</span><span class=p>(</span><span class=n>x</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=n>link</span><span class=p>(</span><span class=n>x</span><span class=p>,</span><span class=n>a</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=n>cut</span><span class=p>(</span><span class=n>y</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=o>-</span><span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span><span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=c1>// (A..., x, B...) + (C..., y, D...) -&gt; (x, B...A..., y, D...C...)
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=kt>int</span> <span class=n>a</span> <span class=o>=</span> <span class=n>cut</span><span class=p>(</span><span class=n>x</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>b</span> <span class=o>=</span> <span class=n>cut</span><span class=p>(</span><span class=n>y</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=n>link</span><span class=p>(</span><span class=n>x</span><span class=p>,</span><span class=n>a</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=n>link</span><span class=p>(</span><span class=n>y</span><span class=p>,</span><span class=n>b</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=n>link</span><span class=p>(</span><span class=n>x</span><span class=p>,</span><span class=n>y</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>return</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>init</span><span class=p>(</span><span class=kt>int</span> <span class=n>n</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>T</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>lf</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=n>T</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>lf</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=n>i</span><span class=p>,</span> <span class=n>T</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>pa</span> <span class=o>=</span> <span class=n>T</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>ch</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>=</span> <span class=n>T</span><span class=p>[</span><span class=n>i</span><span class=p>].</span><span class=n>ch</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=cm>/*void dfs(int i) {
</span></span></span><span class=line><span class=cl><span class=cm>        if(!i) return;
</span></span></span><span class=line><span class=cl><span class=cm>        dfs(T[i].ch[0]);
</span></span></span><span class=line><span class=cl><span class=cm>        cout &lt;&lt; i &lt;&lt; &#39; &#39;;
</span></span></span><span class=line><span class=cl><span class=cm>        dfs(T[i].ch[1]);
</span></span></span><span class=line><span class=cl><span class=cm>    }
</span></span></span><span class=line><span class=cl><span class=cm>    void dbg(int n) {
</span></span></span><span class=line><span class=cl><span class=cm>        //return;
</span></span></span><span class=line><span class=cl><span class=cm>        cout &lt;&lt; &#34;===\n&#34;;
</span></span></span><span class=line><span class=cl><span class=cm>        for(int i = 1; i &lt;= n; i++) if(isroot(i)) dfs(i), cout &lt;&lt; &#39;\n&#39;;
</span></span></span><span class=line><span class=cl><span class=cm>        cout &lt;&lt; &#34;===\n\n&#34;;
</span></span></span><span class=line><span class=cl><span class=cm>    }*/</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=n>cycles</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>n</span><span class=p>,</span><span class=n>q</span><span class=p>,</span><span class=n>v</span><span class=p>[</span><span class=n>N</span><span class=p>],</span><span class=n>vis</span><span class=p>[</span><span class=n>N</span><span class=p>],</span><span class=n>pos</span><span class=p>[</span><span class=n>N</span><span class=p>],</span><span class=n>ans</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kt>signed</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>ios_base</span><span class=o>::</span><span class=n>sync_with_stdio</span><span class=p>(</span><span class=mi>0</span><span class=p>),</span> <span class=n>cin</span><span class=p>.</span><span class=n>tie</span><span class=p>(</span><span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>n</span> <span class=o>&gt;&gt;</span> <span class=n>q</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>cycles</span><span class=p>.</span><span class=n>init</span><span class=p>(</span><span class=n>n</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>v</span><span class=p>[</span><span class=n>i</span><span class=p>],</span> <span class=n>pos</span><span class=p>[</span><span class=n>v</span><span class=p>[</span><span class=n>i</span><span class=p>]]</span> <span class=o>=</span> <span class=n>i</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;=</span> <span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=k>if</span><span class=p>(</span><span class=o>!</span><span class=n>vis</span><span class=p>[</span><span class=n>i</span><span class=p>])</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>last</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>x</span> <span class=o>=</span> <span class=n>i</span><span class=p>;</span> <span class=o>!</span><span class=n>vis</span><span class=p>[</span><span class=n>x</span><span class=p>];</span> <span class=n>x</span> <span class=o>=</span> <span class=n>pos</span><span class=p>[</span><span class=n>x</span><span class=p>])</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span><span class=p>(</span><span class=n>last</span><span class=p>)</span> <span class=n>ans</span> <span class=o>+=</span> <span class=n>cycles</span><span class=p>.</span><span class=n>poke</span><span class=p>(</span><span class=n>v</span><span class=p>[</span><span class=n>last</span><span class=p>],</span><span class=n>v</span><span class=p>[</span><span class=n>x</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>            <span class=n>vis</span><span class=p>[</span><span class=n>x</span><span class=p>]</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=n>last</span> <span class=o>=</span> <span class=n>x</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>ans</span> <span class=o>&lt;&lt;</span> <span class=sc>&#39;\n&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>//tr.dbg(n);
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>//return 0;
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>while</span><span class=p>(</span><span class=n>q</span><span class=o>--</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=kt>int</span> <span class=n>a</span><span class=p>,</span><span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>a</span> <span class=o>&gt;&gt;</span> <span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=n>ans</span> <span class=o>+=</span> <span class=n>cycles</span><span class=p>.</span><span class=n>poke</span><span class=p>(</span><span class=n>a</span><span class=p>,</span><span class=n>b</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>ans</span> <span class=o>&lt;&lt;</span> <span class=sc>&#39;\n&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=c1>//tr.dbg(n);
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div></div></article><div class=blog-post-comments><div id=disqus_thread><script type=text/javascript>(function(){var t,e=document.createElement("script");e.type="text/javascript",e.async=!0,t="omeletwithoutegg",e.src="//"+t+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com/ class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=/>Home</a></li><li><a href=/about>About</a></li><li><a href=/posts>Posts</a></li><li><a href=/resources>Resources</a></li><li><a href=/search>Search</a></li><li><a href=/tags>Tags</a></li></ul></div><div id=toc-footer style=display:none><nav id=TableOfContents><ul><li><a href=#description>Description</a></li><li><a href=#solution>Solution</a></li><li><a href=#ac-code>AC code</a></li></ul></nav></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fomeletwithoutegg.github.io%2f2019%2f12%2f13%2fTIOJ-1950%2f" aria-label=Facebook><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fomeletwithoutegg.github.io%2f2019%2f12%2f13%2fTIOJ-1950%2f&text=TIOJ-1950" aria-label=Twitter><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fomeletwithoutegg.github.io%2f2019%2f12%2f13%2fTIOJ-1950%2f&title=TIOJ-1950" aria-label=Linkedin><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fomeletwithoutegg.github.io%2f2019%2f12%2f13%2fTIOJ-1950%2f&is_video=false&description=TIOJ-1950" aria-label=Pinterest><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=TIOJ-1950&body=Check out this article: https%3a%2f%2fomeletwithoutegg.github.io%2f2019%2f12%2f13%2fTIOJ-1950%2f" aria-label=Email><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fomeletwithoutegg.github.io%2f2019%2f12%2f13%2fTIOJ-1950%2f&title=TIOJ-1950" aria-label=Pocket><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fomeletwithoutegg.github.io%2f2019%2f12%2f13%2fTIOJ-1950%2f&title=TIOJ-1950" aria-label=reddit><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fomeletwithoutegg.github.io%2f2019%2f12%2f13%2fTIOJ-1950%2f&name=TIOJ-1950&description=%e5%b0%8f%e5%90%91%e7%9a%84%e8%a9%a6%e7%85%89%202-3%ef%bc%9a%e8%bd%89%ef%bc%81%28Rotate%21%29%20https%3a%2f%2ftioj.ck.tp.edu.tw%2fproblems%2f1950%0aDescription%20%e7%b5%a6%e5%ae%9a%e9%95%b7%e5%ba%a6%24N%24%e7%9a%84%e6%8e%92%e5%88%97%ef%bc%8c%e5%95%8f%e3%80%8c%e4%bb%a5%e4%ba%a4%e6%8f%9b%e4%bb%bb%e6%84%8f%e5%85%a9%e5%80%8b%e6%95%b8%e5%ad%97%e7%9a%84%e6%96%b9%e5%bc%8f%e6%8e%92%e5%ba%8f%e9%80%99%e5%80%8b%e5%ba%8f%e5%88%97%e9%9c%80%e8%a6%81%e5%a4%9a%e5%b0%91%e6%ac%a1%e6%95%b8%e3%80%8d%0a%e5%8f%a6%e5%a4%96%e6%9c%89%24M%24%e6%ac%a1%e4%bf%ae%e6%94%b9%ef%bc%8c%e6%af%8f%e6%ac%a1%e4%bf%ae%e6%94%b9%e6%9c%83%e4%ba%a4%e6%8f%9b%e6%95%b8%e5%ad%97%24i%24%e5%92%8c%e6%95%b8%e5%ad%97%24j%24%e7%9a%84%e4%bd%8d%e7%bd%ae%ef%bc%8c%e8%ab%8b%e8%bc%b8%e5%87%ba%24M%2b1%24%e8%a1%8c%e4%bb%a3%e8%a1%a8%e4%b8%80%e9%96%8b%e5%a7%8b%e5%92%8c%e6%af%8f%e6%ac%a1%e4%bf%ae%e6%94%b9%e9%81%8e%e5%be%8c%e7%9a%84%e7%ad%94%e6%a1%88%0aSolution%20%e5%b7%b2%e7%b6%93%e7%9f%a5%e9%81%93%e6%af%8f%e5%80%8b%e6%95%b8%e5%ad%97%e6%87%89%e8%a9%b2%e8%a2%ab%e6%94%be%e5%88%b0%e5%93%aa%e8%a3%a1%e4%ba%86%ef%bc%8c%e6%89%80%e4%bb%a5%e6%88%91%e5%80%91%e5%8f%af%e4%bb%a5%e6%83%b3%e5%88%b0%e4%b8%80%e5%80%8b%e6%8e%92%e5%ba%8f%e6%96%b9%e6%b3%95%0a%e6%af%8f%e6%ac%a1%e7%9c%8b%e6%9f%90%e5%80%8b%e4%bd%8d%e7%bd%ae%24i%24%e7%9a%84%e6%95%b8%e5%ad%97%24x%24%ef%bc%8c%e5%a6%82%e6%9e%9c%e5%92%8c%24i%24%e4%b8%8d%e5%90%8c%e7%9a%84%e8%a9%b1%e5%b0%b1%e6%8a%8a%24x%24%e6%94%be%e5%88%b0%e4%bd%8d%e7%bd%ae%24x%24%e7%9a%84%e5%9c%b0%e6%96%b9%ef%bc%8c%e5%86%8d%e7%b9%bc%e7%ba%8c%e5%b0%8d%e5%8e%9f%e6%9c%ac%e6%94%be%e5%9c%a8%e4%bd%8d%e7%bd%ae%24x%24%e7%9a%84%e5%9c%b0%e6%96%b9%e7%9a%84%e6%95%b8%e5%ad%97%e5%81%9a%e5%90%8c%e6%a8%a3%e7%9a%84%e4%ba%8b%0a%e5%8f%af%e4%bb%a5%e7%99%bc%e7%8f%be%e9%80%99%e6%a8%a3%e6%9c%83%e5%bd%a2%e6%88%90%e5%a5%bd%e5%b9%be%e5%80%8b%e3%80%8c%e7%92%b0%e3%80%8d%ef%bc%8c%e4%be%8b%e5%a6%82%e7%af%84%e6%b8%ac%e7%9a%84%24%281%2c%204%2c%202%2c%205%2c%203%29%24%e6%9c%83%e5%bd%a2%e6%88%90%e5%85%a9%e5%80%8b%e7%92%b0%0a%24%24%0a%5cbegin%7bpmatrix%7d%0a1%0a%5cend%7bpmatrix%7d%0a%5cbegin%7bpmatrix%7d%0a4%20%26amp%3b%205%20%26amp%3b%203%20%26amp%3b%202%0a%5cend%7bpmatrix%7d%0a%24%24%0a%e6%88%96%e6%98%af%24%281%2c%206%2c%204%2c%205%2c%203%2c%202%29%24%e6%9c%83%e5%bd%a2%e6%88%90%e4%b8%89%e5%80%8b%e7%92%b0%0a%24%24%0a%5cbegin%7bpmatrix%7d%0a1%0a%5cend%7bpmatrix%7d%0a%5cbegin%7bpmatrix%7d%0a6%20%26amp%3b%202%0a%5cend%7bpmatrix%7d%0a%5cbegin%7bpmatrix%7d%0a4%20%26amp%3b%205%20%26amp%3b%203%0a%5cend%7bpmatrix%7d%0a%24%24%0a%e4%b9%9f%e5%b0%b1%e6%98%af%e8%aa%aa%ef%bc%8c%e6%af%8f%e5%80%8b%e7%92%b0%e4%bb%a3%e8%a1%a8%e7%ac%ac%e4%b8%80%e5%80%8b%e5%85%83%e7%b4%a0%e8%a6%81%e6%94%be%e5%88%b0%e7%ac%ac%e4%ba%8c%e5%80%8b%e5%85%83%e7%b4%a0%e7%9a%84%e4%bd%8d%e7%bd%ae%ef%bc%8c%e7%ac%ac%e4%ba%8c%e5%80%8b%e5%85%83%e7%b4%a0%e8%a6%81%e6%94%be%e5%88%b0%e7%ac%ac%e4%b8%89%e5%80%8b%e5%85%83%e7%b4%a0%e7%9a%84%e4%bd%8d%e7%bd%ae%26hellip%3b%e4%bb%a5%e6%ad%a4%e9%a1%9e%e6%8e%a8%0a%e4%b8%80%e5%80%8b%e5%a4%a7%e5%b0%8f%24L%24%e7%9a%84%e7%92%b0%e9%9c%80%e8%a6%81%e7%9a%84%e4%ba%a4%e6%8f%9b%e6%ac%a1%e6%95%b8%e6%98%af%24L-1%24%ef%bc%8c%e6%89%80%e4%bb%a5%e6%8a%8a%241%5cdots%20n%24%e7%9a%84%e6%8e%92%e5%88%97%e6%8e%92%e5%ba%8f%e5%a5%bd%e6%89%80%e9%9c%80%e7%9a%84%e6%99%82%e9%96%93%e5%b0%b1%e6%98%af%24n-%28%24%e7%92%b0%e7%9a%84%e5%80%8b%e6%95%b8%24%29%24%0a%e7%94%a8%e6%95%b8%e5%ad%b8%e4%b8%80%e9%bb%9e%e7%9a%84%e8%ac%9b%e6%b3%95%e5%b0%b1%e6%98%af%e4%b8%80%e5%80%8b%e7%bd%ae%e6%8f%9b%e5%8f%af%e4%bb%a5%e5%88%86%e8%a7%a3%e6%88%90%e5%a5%bd%e5%a4%9a%e4%b8%8d%e7%9b%b8%e4%ba%a4%e7%9a%84%e8%bc%aa%e6%8f%9b%28%3f%29%e8%80%8c%e4%b8%94%e6%96%b9%e6%b3%95%e6%98%af%e5%94%af%e4%b8%80%e7%9a%84%e5%96%94%0a%e8%80%83%e6%85%ae%e4%b8%80%e4%b8%8b%e4%ba%a4%e6%8f%9b%e4%ba%86%e5%85%a9%e5%80%8b%e6%95%b8%e5%ad%97%e6%9c%83%e7%99%bc%e7%94%9f%e4%bb%80%e9%ba%bc%e4%ba%8b%3a%0a%e5%a6%82%e6%9e%9c%e4%bb%96%e5%80%91%e5%9c%a8%e5%90%8c%e4%b8%80%e5%80%8b%e3%80%8c%e7%92%b0%e3%80%8d%e8%a3%a1%e9%9d%a2%ef%bc%8c%e9%82%a3%e9%82%a3%e5%80%8b%e7%92%b0%e5%b0%b1%e6%9c%83%e8%a2%ab%e5%88%87%e6%88%90%e5%85%a9%e5%80%8b%e7%92%b0%0a%e5%8f%8d%e4%b9%8b%e5%89%87%e6%9c%83%e8%ae%93%e5%85%a9%e5%80%8b%e7%92%b0%e5%90%88%e5%9c%a8%e4%b8%80%e8%b5%b7%ef%bc%8c%e8%ae%8a%e6%88%90%e4%b8%80%e5%80%8b%e3%80%8c%e7%92%b0%e3%80%8d%0a%e7%a4%ba%e6%84%8f%e5%9c%96%e5%a4%a7%e6%a6%82%e5%b0%b1%e6%98%af%e9%80%99%e6%a8%a3%0a%e8%a6%81%e6%80%8e%e9%ba%bc%e8%be%a6%e5%88%b0%e9%80%99%e4%bb%b6%e4%ba%8b%e5%91%a2%ef%bc%9f%e5%bf%ab%e9%80%9f%e6%8a%8a%e5%85%83%e7%b4%a0%e4%b9%8b%e9%96%93%e9%80%a3%e6%8e%a5%e6%88%96%e8%80%85%e5%88%87%e6%96%b7%ef%bc%8c%e6%88%91%e5%80%91%e6%9c%83%e6%83%b3%e5%88%b0%e4%bd%bf%e7%94%a8%e9%8f%88%e7%b5%90%e4%b8%b2%e5%88%97%ef%bc%8c%e4%bd%86%e6%98%af%e9%80%99%e6%a8%a3%e7%84%a1%e6%b3%95%e5%88%a4%e6%96%b7%e4%bb%96%e5%80%91%e6%98%af%e5%90%a6%e5%9c%a8%e5%90%8c%e4%b8%80%e5%80%8b%e7%92%b0%e8%a3%a1%e9%9d%a2%0a%e9%80%80%e8%80%8c%e6%b1%82%e5%85%b6%e6%ac%a1%e5%8f%af%e4%bb%a5%e4%bd%bf%e7%94%a8%e4%ba%8c%e5%85%83%e6%a8%b9%e4%be%86%e7%b6%ad%e8%ad%b7%ef%bc%8c%e7%94%a8%24%5cmathcal%7bO%7d%28%5clog%20n%29%24%e7%8d%b2%e5%be%97%e5%8f%af%e4%bb%a5%e5%89%aa%e5%88%87%e5%8f%88%e5%8f%af%e4%bb%a5%e9%bb%8f%e8%b2%bc%e5%ba%8f%e5%88%97%e7%9a%84%e7%a5%9e%e5%8a%9b%28%3f%29%0a%e6%88%91%e9%81%b8%e6%93%87%e7%94%a8splay%e4%be%86%e5%af%a6%e4%bd%9c%ef%bc%8c%e8%a9%b3%e7%b4%b0%e7%9a%84%e5%8e%9f%e7%90%86%e8%87%aa%e5%b7%b1google%20OwO%0aAC%20code%201%202%203%204%205%206%207%208%209%2010%2011%2012%2013%2014%2015%2016%2017%2018%2019%2020%2021%2022%2023%2024%2025%2026%2027%2028%2029%2030%2031%2032%2033%2034%2035%2036%2037%2038%2039%2040%2041%2042%2043%2044%2045%2046%2047%2048%2049%2050%2051%2052%2053%2054%2055%2056%2057%2058%2059%2060%2061%2062%2063%2064%2065%2066%2067%2068%2069%2070%2071%2072%2073%2074%2075%2076%2077%2078%2079%2080%2081%2082%2083%2084%2085%2086%2087%2088%2089%2090%2091%2092%2093%2094%2095%2096%2097%2098%2099%20100%20101%20102%20103%20104%20105%20106%20107%20108%20109%20110%20111%20112%20113%20114%20115%20116%20117%20118%20119%20120%20121%20122%20123%20124%20125%20126%20127%20128%20129%20130%20131%20132%20133%20134%20%2f%2f%20__________________%20%2f%2f%20%7c%20________________%20%7c%20%2f%2f%20%7c%7c%20____%20%7c%7c%20%2f%2f%20%7c%7c%20%2f%5c%20%7c%20%7c%7c%20%2f%2f%20%7c%7c%20%2f__%5c%20%7c%20%7c%7c%20%2f%2f%20%7c%7c%20%2f%20%5c%20%7c____%20%7c%7c%20%2f%2f%20%7c%7c________________%7c%7c%20%2f%2f%20%7c__________________%7c%20%2f%2f%20%5c%23%23%23%23%23%23%23%23%23%23%23%23%23%23%23%23%23%23%23%5c%20%2f%2f%20%5c%23%23%23%23%23%23%23%23%23%23%23%23%23%23%23%23%23%23%23%5c%20%2f%2f%20%5c%20____%20%5c%20%2f%2f%20%5c_______%5c___%5c_______%5c%20%2f%2f%20An%20AC%20a%20day%20keeps%20the%20doctor%20away." aria-label=Tumblr><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fomeletwithoutegg.github.io%2f2019%2f12%2f13%2fTIOJ-1950%2f&t=TIOJ-1950" aria-label="Hacker News"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu-toggle class=icon href=# onclick='return $("#nav-footer").toggle(),!1' aria-label=Menu><i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=toc-toggle class=icon href=# onclick='return $("#toc-footer").toggle(),!1' aria-label=TOC><i class="fas fa-list fa-lg" aria-hidden=true></i> TOC</a>
<a id=share-toggle class=icon href=# onclick='return $("#share-footer").toggle(),!1' aria-label=Share><i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a></div></div></div><footer id=footer><div class=footer-left>Copyright &copy; 2023 Omelet</div><div class=footer-right><nav><ul><li><a href=/>Home</a></li><li><a href=/about>About</a></li><li><a href=/posts>Posts</a></li><li><a href=/resources>Resources</a></li><li><a href=/search>Search</a></li><li><a href=/tags>Tags</a></li></ul></nav></div></footer></div><link rel=stylesheet href=/lib/font-awesome/css/all.min.css><script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>
<script src=/js/code-copy.js></script>
<script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]]},svg:{fontCache:"global"}}</script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><script src=/lib/clipboard/clipboard.min.js></script>
<script>$(function(){var t,e='<span class="btn-copy tooltipped tooltipped-sw" aria-label="Copy to clipboard!">';e+='<i class="far fa-clone"></i>',e+="</span>",$(".highlight table").before(e),t=new ClipboardJS(".btn-copy",{text:function(e){var t='code[data-lang]:not([data-lang=""])',n=Array.from(e.nextElementSibling.querySelectorAll(t)).reduce((e,t)=>e+t.innerText+`
`,"");return n}}),t.on("success",function(e){e.trigger.setAttribute("aria-label","Copied!"),e.clearSelection()}),t.on("error",function(e){console.error("Action:",e.action),console.error("Trigger:",e.trigger)})})</script><script type=text/javascript src=/js/canvas-nest.js count=90 color=0,200,100 opacity=0.5></script></body></html>